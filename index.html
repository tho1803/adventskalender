<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Systemischer Adventskalender mit 25 T√ºrchen</title>
    <style>
:root {
    --forest-green: #2d5016;
    --sage-green: #8b9d83;
    --deep-red: #8b2d2d;
    --warm-red: #c44b4b;
    --gold: #d4af37;
    --cream: #fdf8f3;
    --dark-text: #2d3e20;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Georgia', 'Times New Roman', serif;
    background: linear-gradient(135deg, var(--forest-green) 0%, var(--sage-green) 100%);
    color: var(--dark-text);
    min-height: 100vh;
    padding: 20px;
}

header {
    text-align: center;
    margin-bottom: 40px;
    padding: 30px 20px;
    background: rgba(253, 248, 243, 0.95);
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.2);
}

h1 {
    color: var(--deep-red);
    font-size: 2.5rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
}

.subtitle {
    color: var(--forest-green);
    font-size: 1.2rem;
    font-style: italic;
}

.calendar-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.door {
    position: relative;
    aspect-ratio: 1;
    background: linear-gradient(145deg, var(--warm-red), var(--deep-red));
    border: 3px solid var(--gold);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 15px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
}

.door:hover {
    transform: translateY(-8px) scale(1.05);
    box-shadow: 0 12px 30px rgba(212, 175, 55, 0.4);
}

.door.special {
    border-width: 5px;
    box-shadow: 0 0 25px rgba(212, 175, 55, 0.7);
    animation: goldGlow 2s ease-in-out infinite;
}

@keyframes goldGlow {
    0%, 100% { box-shadow: 0 0 20px rgba(212, 175, 55, 0.6); }
    50% { box-shadow: 0 0 35px rgba(212, 175, 55, 0.9); }
}

.door.opened {
    background: linear-gradient(145deg, var(--sage-green), var(--forest-green));
    border-color: var(--gold);
}

.door.locked {
    cursor: not-allowed;
    opacity: 0.6;
}

.door.locked:hover {
    transform: none;
}

.door-number {
    font-size: 3rem;
    font-weight: bold;
    color: white;
    text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
    margin-bottom: 5px;
}

.door-date {
    font-size: 0.9rem;
    color: var(--cream);
    font-style: italic;
    margin-bottom: 8px;
}

.door-title {
    font-size: 0.85rem;
    color: var(--cream);
    text-align: center;
    font-weight: 500;
    opacity: 0;
    transition: opacity 0.3s;
}

.door:hover .door-title {
    opacity: 1;
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(45, 80, 22, 0.95);
    animation: fadeIn 0.3s;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.modal-content {
    background-color: var(--cream);
    margin: 3% auto;
    padding: 40px;
    border: 3px solid var(--gold);
    border-radius: 15px;
    width: 90%;
    max-width: 800px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.3);
    animation: slideIn 0.4s;
    max-height: 85vh;
    overflow-y: auto;
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.close {
    color: var(--deep-red);
    float: right;
    font-size: 32px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.3s;
    line-height: 1;
}

.close:hover {
    color: var(--warm-red);
}

#modalBody {
    margin-top: 20px;
    color: var(--dark-text);
}

#modalBody h3 {
    color: var(--deep-red);
    font-size: 1.5rem;
    margin-top: 20px;
    margin-bottom: 15px;
}

#modalBody .week-title {
    color: var(--sage-green);
    font-size: 1.1rem;
    font-style: italic;
    margin-bottom: 20px;
    padding: 10px;
    background: rgba(139, 157, 131, 0.1);
    border-left: 4px solid var(--sage-green);
}

#modalBody blockquote {
    border-left: 4px solid var(--gold);
    padding-left: 20px;
    margin: 20px 0;
    font-style: italic;
    color: var(--forest-green);
}

#modalBody .impuls {
    background: rgba(212, 175, 55, 0.1);
    padding: 15px;
    border-radius: 8px;
    margin: 15px 0;
}

#modalBody .question {
    background: rgba(139, 45, 45, 0.1);
    padding: 15px;
    border-radius: 8px;
    margin: 15px 0;
    border-left: 4px solid var(--deep-red);
}

#modalBody ol, #modalBody ul {
    margin-left: 30px;
    margin-top: 10px;
}

@media (max-width: 768px) {
    h1 {
        font-size: 1.8rem;
    }
    
    .calendar-grid {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 15px;
    }
    
    .door-number {
        font-size: 2.5rem;
    }
    
    .modal-content {
        padding: 25px;
        margin: 10% auto;
    }
}

@media (max-width: 480px) {
    .calendar-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
    }
    
    .door-number {
        font-size: 2rem;
    }
}
</style>
</head>
<body>
    <header>
        <h1>üéÑ Systemischer Adventskalender mit 25 T√ºrchen üéÑ</h1>
        <p class="subtitle">25 systemische Impulse vom 30. November bis 24. Dezember</p>
    </header>

    <div class="calendar-grid" id="calendarGrid"></div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

<script>
const calendarContent = [
    {
        day: 1,
        date: "30. Nov",
        title: "Neubeginn",
        special: true,
        actualDate: new Date(2024, 10, 30), // 30. November 2024
        content: `
            <div class="week-title">Woche 1: AUTOPOIESIS ‚Äì Selbstorganisation und Selbsterschaffung</div>
            <h3>30. November - Erster Advent: Neubeginn</h3>
            <h3>"Der Anfang liegt in dir"</h3>
            <div class="impuls"><strong>Impuls:</strong> Systeme erschaffen sich selbst aus sich heraus. Wie ein Fest, das nicht von au√üen beginnt, sondern in der Gemeinschaft entsteht, die es feiert.</div>
            <blockquote>"Ein System kann nur das erzeugen, was in seinen M√∂glichkeiten liegt - aber diese M√∂glichkeiten sind unendlich." (Humberto Maturana)</blockquote>
            <div class="question"><strong>Reflexionsfrage:</strong> Welches "System" in deinem Leben organisiert sich gerade neu? Wo bist du gleichzeitig Sch√∂pfer*in und Gesch√∂pf?</div>
        `
    },
    {
        day: 2,
        date: "1. Dez",
        title: "Referenzsystem",
        actualDate: new Date(2024, 11, 1),
        content: `
            <h3>1. Dezember</h3>
            <h3>Das eigene Referenzsystem</h3>
            <blockquote>"Wir sehen die Welt nicht, wie sie ist, sondern wie wir sind." (Ana√Øs Nin)</blockquote>
            <div class="impuls"><strong>Impuls:</strong> Dein Referenzsystem ist wie eine innere Landkarte - selbstgezeichnet, st√§ndig aktualisiert, einzigartig. Es organisiert sich durch jede Erfahrung neu.</div>
            <div class="question"><strong>Frage:</strong> Welche "Legende" steht auf deiner inneren Landkarte? Was bedeuten die Symbole, die du verwendest?</div>
        `
    },
    {
        day: 3,
        date: "2. Dez",
        title: "Glaubenss√§tze",
        actualDate: new Date(2024, 11, 2),
        content: `
            <h3>2. Dezember</h3>
            <h3>Glaubenss√§tze als lebendige Systeme - "Die unsichtbaren Regisseure"</h3>
            <div class="impuls"><strong>Impuls:</strong> Glaubenss√§tze sind wie Programme, die im Hintergrund laufen. Sie sind nicht wahr oder falsch - sie sind funktional oder dysfunktional f√ºr dein aktuelles Leben. "Ich bin nicht gut genug" ist kein Fakt, sondern ein autopoietisches Programm, das sich selbst best√§tigt und erh√§lt.</div>
            <blockquote>"Achte auf deine Gedanken, denn sie werden zu Worten. Achte auf deine Worte, denn sie werden zu Handlungen." (Talmud)</blockquote>
            <div class="question"><strong>Reflexionsfrage:</strong> Welcher Glaubenssatz hat sich √ºberlebt und darf heute in den Ruhestand gehen? Was w√§re m√∂glich, wenn du ihn loslassen w√ºrdest?</div>
        `
    },
    {
        day: 4,
        date: "3. Dez",
        title: "Perspektivwechsel",
        actualDate: new Date(2024, 11, 3),
        content: `
            <h3>3. Dezember</h3>
            <h3>Perspektivwechsel - "Die Kunst des Umkreisens"</h3>
            <div class="impuls"><strong>Impuls:</strong> In der Systemik gibt es keine objektive Wahrheit - nur verschiedene Perspektiven. Jede Perspektive ist eine neue Wirklichkeit.</div>
            <blockquote>"Die Landkarte ist nicht das Gebiet." (Alfred Korzybski)</blockquote>
            <div class="question"><strong>√úbung:</strong> Betrachte eine Situation heute aus drei Perspektiven:
            <ol>
                <li>Aus deiner eigenen</li>
                <li>Aus der eines Beteiligten</li>
                <li>Aus der eines wohlwollenden Beobachters</li>
            </ol>
            Was ver√§ndert sich?</div>
        `
    },
    {
        day: 5,
        date: "4. Dez",
        title: "Der gute Grund",
        actualDate: new Date(2024, 11, 4),
        content: `
            <h3>4. Dezember</h3>
            <h3>Der gute Grund - "Alles macht Sinn im jeweiligen Kontext"</h3>
            <div class="impuls"><strong>Impuls:</strong> Hinter jedem Verhalten steckt ein guter Grund - auch wenn er auf den ersten Blick nicht sichtbar ist. Symptome sind L√∂sungsversuche des Systems.</div>
            <blockquote>"Verstehen hei√üt nicht einverstanden sein, sondern den Sinn im scheinbar Sinnlosen erkennen." (Viktor Frankl)</blockquote>
            <div class="question"><strong>Reflexionsfrage:</strong> Welches deiner Verhaltensweisen irritiert dich selbst? Wof√ºr k√∂nnte es - in einem fr√ºheren Kontext - die perfekte L√∂sung gewesen sein?</div>
        `
    },
    {
        day: 6,
        date: "5. Dez",
        title: "Ressourcen",
        actualDate: new Date(2024, 11, 5),
        content: `
            <h3>5. Dezember</h3>
            <h3>Ressourcen: Die Selbstversorgung des Systems</h3>
            <div class="impuls"><strong>Impuls:</strong> Autopoietische Systeme erzeugen ihre wichtigsten Ressourcen selbst - aus dem, was bereits da ist. Das Paradox: Wir werden reich beschenkt, indem wir entdecken, was wir schon haben.</div>
            <blockquote>"Du bist reicher, als du denkst - du hast nur vergessen, wo du deine Sch√§tze vergraben hast." (Rumi)</blockquote>
            <div class="question"><strong>Frage:</strong> Welche Ressource hast du in letzter Zeit √ºbersehen, weil du sie von au√üen erwartet hast?</div>
        `
    },
    {
        day: 7,
        date: "6. Dez",
        title: "Flow",
        special: true,
        actualDate: new Date(2024, 11, 6),
        content: `
            <h3>6. Dezember - Nikolaus</h3>
            <h3>Flow - Wenn das System sich selbst vergisst</h3>
            <blockquote>"Der Fluss flie√üt nicht, er ist das Flie√üen." (Heraklit)</blockquote>
            <div class="impuls"><strong>Impuls:</strong> Im Flow verschmilzt das selbstorganisierende System mit seiner T√§tigkeit. Sch√∂pfer und Sch√∂pfung werden eins. Was w√§re heute ein Tun, das dich vom Denken ins Werden bringt ‚Äì und damit dein System gleich mit?</div>
            <div class="question"><strong>Reflexion:</strong> Wann hast du dich zuletzt selbst vergessen? Was hat diesen Zustand erm√∂glicht?</div>
        `
    },
    {
        day: 8,
        date: "7. Dez",
        title: "Grenzen",
        actualDate: new Date(2024, 11, 7),
        content: `
            <h3>7. Dezember</h3>
            <h3>Grenzen - "Wo du aufh√∂rst und die Welt beginnt"</h3>
            <div class="impuls"><strong>Impuls:</strong> Ein System definiert sich durch seine Grenzen. Ohne Grenzen kein System. Ohne Grenzen keine Identit√§t. Grenzen sind nicht Mauern - sie sind lebendige Membranen, die entscheiden, was hinein und hinaus darf.</div>
            <blockquote>"Gute Z√§une machen gute Nachbarn." (Robert Frost)</blockquote>
            <div class="question"><strong>Frage:</strong> Welche Grenze darfst du heute klarer ziehen? Welche Grenze darf durchl√§ssiger werden?</div>
        `
    },
    {
        day: 9,
        date: "8. Dez",
        title: "R√ºckkopplung",
        special: true,
        actualDate: new Date(2024, 11, 8),
        content: `
            <div class="week-title">Woche 2: ZIRKULARIT√ÑT ‚Äì Wenn Wirkung zur Ursache wird</div>
            <h3>8. Dezember - Zweiter Advent: R√ºckkopplung</h3>
            <h3>"Alles kehrt zur√ºck"</h3>
            <div class="impuls"><strong>Impuls:</strong> In zirkul√§ren Systemen ist jede Wirkung auch eine Ursache. Was du aussendest, kommt zu dir zur√ºck - nicht als Strafe oder Belohnung, sondern als Systemlogik.</div>
            <blockquote>"Wie man in den Wald hineinruft, so schallt es heraus." (Volksweisheit)</blockquote>
            <div class="question"><strong>Frage:</strong> Welches Echo h√∂rst du gerade in deinem Leben? Was hast du ausgesendet, das nun zu dir zur√ºckkehrt?</div>
        `
    },
    {
        day: 10,
        date: "9. Dez",
        title: "Muster erkennen",
        actualDate: new Date(2024, 11, 9),
        content: `
            <h3>9. Dezember</h3>
            <h3>Muster erkennen - "Die Wiederholung des Immergleichen"</h3>
            <div class="impuls"><strong>Impuls:</strong> Systeme lieben Muster. Sie wiederholen, was funktioniert hat - selbst wenn es nicht mehr funktioniert. Muster sind die Komfortzone des Systems.</div>
            <blockquote>"Wahnsinn ist, immer wieder das Gleiche zu tun und andere Ergebnisse zu erwarten." (oft Albert Einstein zugeschrieben)</blockquote>
            <div class="question"><strong>Frage:</strong> Welches Muster wiederholst du gerade - obwohl du dir andere Ergebnisse w√ºnschst?</div>
        `
    },
    {
        day: 11,
        date: "10. Dez",
        title: "Teufelskreis",
        actualDate: new Date(2024, 11, 10),
        content: `
            <h3>10. Dezember</h3>
            <h3>Teufelskreis durchbrechen - "Der Ausstieg aus der Spirale"</h3>
            <div class="impuls"><strong>Impuls:</strong> Ein Teufelskreis entsteht, wenn die L√∂sung zum Problem wird. Mehr desselben f√ºhrt zu mehr desselben Problems. Der Ausweg? Nicht h√§rter, sondern anders.</div>
            <blockquote>"Probleme kann man niemals mit derselben Denkweise l√∂sen, durch die sie entstanden sind." (Albert Einstein)</blockquote>
            <div class="question"><strong>Reflexion:</strong> Wo versuchst du, ein Problem mit "mehr desselben" zu l√∂sen? Was w√§re das genaue Gegenteil deiner bisherigen Strategie?</div>
        `
    },
    {
        day: 12,
        date: "11. Dez",
        title: "Engelskreis",
        actualDate: new Date(2024, 11, 11),
        content: `
            <h3>11. Dezember</h3>
            <h3>Engelskreis erschaffen - "Wenn sich das Gute verst√§rkt"</h3>
            <div class="impuls"><strong>Impuls:</strong> Was w√§re, wenn du bewusst positive R√ºckkopplungen in Gang setzt? Ein L√§cheln erzeugt ein L√§cheln. Dankbarkeit erzeugt Dankbarkeit. Vertrauen erzeugt Vertrauen.</div>
            <blockquote>"Sei du selbst die Ver√§nderung, die du dir w√ºnschst f√ºr diese Welt." (Mahatma Gandhi)</blockquote>
            <div class="question"><strong>Experiment:</strong> Starte heute einen Engelskreis. Was k√∂nntest du tun, das eine positive R√ºckkopplung in Gang setzt?</div>
        `
    },
    {
        day: 13,
        date: "12. Dez",
        title: "Selbsterf√ºllende Prophezeiung",
        actualDate: new Date(2024, 11, 12),
        content: `
            <h3>12. Dezember</h3>
            <h3>Die selbsterf√ºllende Prophezeiung - "Du bekommst, was du erwartest"</h3>
            <div class="impuls"><strong>Impuls:</strong> Deine Erwartungen sind keine neutralen Beobachtungen - sie sind Interventionen. Was du erwartest, das erzeugst du durch dein Verhalten. Die Prophezeiung erf√ºllt sich selbst.</div>
            <blockquote>"Ob du denkst, du kannst es, oder du kannst es nicht - du wirst recht behalten." (Henry Ford)</blockquote>
            <div class="question"><strong>Frage:</strong> Welche Prophezeiung erf√ºllst du gerade? Und w√§re es nicht Zeit f√ºr eine neue, freundlichere Vorhersage?</div>
        `
    },
    {
        day: 14,
        date: "13. Dez",
        title: "Kipppunkte",
        actualDate: new Date(2024, 11, 13),
        content: `
            <h3>13. Dezember</h3>
            <h3>Kipppunkte - "Wenn aus Quantit√§t Qualit√§t wird"</h3>
            <div class="impuls"><strong>Impuls:</strong> Lange scheint sich nichts zu √§ndern - und pl√∂tzlich kippt das ganze System. Der letzte Tropfen. Der ber√ºhmte Punkt, an dem kein Zur√ºck mehr m√∂glich ist. Systeme ver√§ndern sich nicht linear, sondern in Spr√ºngen.</div>
            <blockquote>"Der Tropfen, der das Fass zum √úberlaufen bringt." (Sprichwort)</blockquote>
            <div class="question"><strong>Reflexion:</strong> An welchem Kipppunkt stehst du gerade? Was w√§re der "letzte Tropfen" f√ºr eine Ver√§nderung, die du dir w√ºnschst?</div>
        `
    },
    {
        day: 15,
        date: "14. Dez",
        title: "Resonanz",
        actualDate: new Date(2024, 11, 14),
        content: `
            <h3>14. Dezember</h3>
            <h3>Resonanz - "Wenn Systeme mitschwingen"</h3>
            <div class="impuls"><strong>Impuls:</strong> Systeme beeinflussen sich gegenseitig - oft ohne Worte, ohne Ber√ºhrung. Stimmungen √ºbertragen sich. Emotionen schwingen mit. Du bist Teil eines gr√∂√üeren Resonanzraums.</div>
            <blockquote>"Wenn du eine Saite zupfst, schwingen alle anderen Saiten derselben Frequenz mit." (Physikalisches Prinzip)</blockquote>
            <div class="question"><strong>Frage:</strong> Mit welchen Systemen (Menschen, Gruppen, Orten) gehst du in Resonanz? Und welche Frequenz sendest du gerade aus?</div>
        `
    },
    {
        day: 16,
        date: "15. Dez",
        title: "Bedeutung entsteht",
        special: true,
        actualDate: new Date(2024, 11, 15),
        content: `
            <div class="week-title">Woche 3: KOMMUNIKATION ‚Äì Wie Wirklichkeit im Dialog entsteht</div>
            <h3>15. Dezember - Dritter Advent: Bedeutung entsteht</h3>
            <h3>"Im Austausch wird Welt"</h3>
            <div class="impuls"><strong>Impuls:</strong> Bedeutung ist nicht in den Dingen - sie entsteht zwischen uns. In der Kommunikation. Im Austausch. Jedes Gespr√§ch ist eine gemeinsame Welterschaffung.</div>
            <blockquote>"Man kann nicht nicht kommunizieren." (Paul Watzlawick)</blockquote>
            <div class="question"><strong>Frage:</strong> Welche Bedeutung habt ihr gemeinsam erschaffen in einem k√ºrzlichen Gespr√§ch? Und welche andere Bedeutung w√§re auch m√∂glich gewesen?</div>
        `
    },
    {
        day: 17,
        date: "16. Dez",
        title: "Zuh√∂ren",
        actualDate: new Date(2024, 11, 16),
        content: `
            <h3>16. Dezember</h3>
            <h3>Die Kunst des Zuh√∂rens - "Verstehen hei√üt h√∂ren, was nicht gesagt wird"</h3>
            <div class="impuls"><strong>Impuls:</strong> Echtes Zuh√∂ren ist selten. Meist warten wir nur darauf, selbst zu sprechen. Oder wir h√∂ren nur, was wir h√∂ren wollen. Systemisches Zuh√∂ren bedeutet: Auch das Ungesagte wahrnehmen. Den Kontext h√∂ren. Die Beziehung h√∂ren.</div>
            <blockquote>"Wir haben zwei Ohren und einen Mund, damit wir doppelt so viel zuh√∂ren wie wir reden." (Epiktet)</blockquote>
            <div class="question"><strong>√úbung:</strong> H√∂re heute jemandem zu - ohne zu unterbrechen, ohne zu bewerten, ohne sofort eine L√∂sung zu haben. Einfach nur zuh√∂ren. Was ver√§ndert sich?</div>
        `
    },
    {
        day: 18,
        date: "17. Dez",
        title: "Fragen statt Antworten",
        actualDate: new Date(2024, 11, 17),
        content: `
            <h3>17. Dezember</h3>
            <h3>Die Kraft der Fragen - "Wer fragt, f√ºhrt"</h3>
            <div class="impuls"><strong>Impuls:</strong> Gute Fragen sind wichtiger als schnelle Antworten. Eine Frage √∂ffnet R√§ume. Eine Antwort schlie√üt sie. Systemische Fragen laden ein zum gemeinsamen Denken, statt Wissen zu √ºbertragen.</div>
            <blockquote>"Die wichtigste Frage ist nicht: 'Was ist die Antwort?', sondern: 'Was ist die Frage?'" (Peter Drucker)</blockquote>
            <div class="question"><strong>√úbung:</strong> Stelle heute eine Frage, auf die du selbst keine Antwort hast. Und lausche, was entsteht.</div>
        `
    },
    {
        day: 19,
        date: "18. Dez",
        title: "Metakommunikation",
        actualDate: new Date(2024, 11, 18),
        content: `
            <h3>18. Dezember</h3>
            <h3>√úber das Reden reden - "Die Metaebene"</h3>
            <div class="impuls"><strong>Impuls:</strong> Manchmal ist das Problem nicht, was gesagt wird, sondern wie dar√ºber gesprochen wird. Oder dass nicht dar√ºber gesprochen wird, wie gesprochen wird. Die Metaebene ist die Rettung vieler Gespr√§che.</div>
            <blockquote>"Das gr√∂√üte Problem in der Kommunikation ist die Illusion, sie h√§tte stattgefunden." (George Bernard Shaw)</blockquote>
            <div class="question"><strong>Experiment:</strong> "Lass uns mal dar√ºber reden, wie wir gerade miteinander reden." - Wann k√∂nntest du diesen Satz heute verwenden?</div>
        `
    },
    {
        day: 20,
        date: "19. Dez",
        title: "Paradoxe Kommunikation",
        actualDate: new Date(2024, 11, 19),
        content: `
            <h3>19. Dezember</h3>
            <h3>Paradoxien und Double-Binds - "Sei spontan!"</h3>
            <div class="impuls"><strong>Impuls:</strong> "Sei spontan!" ist eine paradoxe Aufforderung. Man kann nicht auf Befehl spontan sein. Solche Paradoxien sind √ºberall. Sie binden uns. Die L√∂sung? Das Paradox benennen und damit aufl√∂sen.</div>
            <blockquote>"Dieser Satz ist falsch." (Logisches Paradox)</blockquote>
            <div class="question"><strong>Frage:</strong> In welcher paradoxen Kommunikation steckst du fest? "Ich will, dass du dich √§nderst, aber bleib so wie du bist"?</div>
        `
    },
    {
        day: 21,
        date: "20. Dez",
        title: "Schweigen",
        actualDate: new Date(2024, 11, 20),
        content: `
            <h3>20. Dezember</h3>
            <h3>Die Sprache des Schweigens - "Was ungesagt bleibt"</h3>
            <div class="impuls"><strong>Impuls:</strong> Schweigen ist nicht die Abwesenheit von Kommunikation. Schweigen kommuniziert. Es kann Zustimmung sein, Ablehnung, √úberforderung, Respekt, Gleichg√ºltigkeit. Schweigen ist mehrdeutig - und gerade deshalb so wirksam.</div>
            <blockquote>"Reden ist Silber, Schweigen ist Gold." (Sprichwort)</blockquote>
            <div class="question"><strong>Reflexion:</strong> Was hast du heute durch dein Schweigen kommuniziert? Und was h√§ttest du gerne gesagt?</div>
        `
    },
    {
        day: 22,
        date: "21. Dez",
        title: "Wahrheit ist konstruiert",
        actualDate: new Date(2024, 11, 21),
        content: `
            <h3>21. Dezember</h3>
            <h3>Die Konstruktion von Wahrheit - "Es gibt keine objektive Realit√§t"</h3>
            <div class="impuls"><strong>Impuls:</strong> Was wir "Wahrheit" nennen, ist eine Konstruktion. Keine Abbildung der Realit√§t, sondern eine Erfindung unseres Gehirns. Wir sehen nicht, was ist - sondern was wir f√ºr m√∂glich halten.</div>
            <blockquote>"Es gibt keine Fakten, nur Interpretationen." (Friedrich Nietzsche)</blockquote>
            <div class="question"><strong>Frage:</strong> Welche "Wahrheit" hast du konstruiert, die du f√ºr die Realit√§t h√§ltst? Und welche andere Konstruktion w√§re ebenso g√ºltig?</div>
        `
    },
    {
        day: 23,
        date: "22. Dez",
        title: "Beobachterabh√§ngigkeit",
        special: true,
        actualDate: new Date(2024, 11, 22),
        content: `
            <div class="week-title">Woche 4: KONSTRUKTIVISMUS ‚Äì Die Wirklichkeit, die wir erschaffen</div>
            <h3>22. Dezember - Vierter Advent: Beobachterabh√§ngigkeit</h3>
            <h3>"Du bist, was du siehst"</h3>
            <div class="impuls"><strong>Impuls:</strong> Du kannst nicht beobachten, ohne das Beobachtete zu ver√§ndern. Deine Aufmerksamkeit ist eine Intervention. Du bist nicht neutraler Zuschauer - du bist immer Teil des Systems.</div>
            <blockquote>"Der Beobachter ist das Beobachtete." (Jiddu Krishnamurti)</blockquote>
            <div class="question"><strong>Frage:</strong> Was ver√§ndert sich in einer Situation, allein dadurch, dass du sie beobachtest? Und wer w√§rst du, wenn du sie anders beobachten w√ºrdest?</div>
        `
    },
    {
        day: 24,
        date: "23. Dez",
        title: "M√∂glichkeitsr√§ume",
        actualDate: new Date(2024, 11, 23),
        content: `
            <h3>23. Dezember</h3>
            <h3>M√∂glichkeitsr√§ume √∂ffnen - "Was w√§re, wenn...?"</h3>
            <div class="impuls"><strong>Impuls:</strong> Wenn Wirklichkeit konstruiert ist, dann k√∂nnen wir sie auch anders konstruieren. Nicht alles ist m√∂glich - aber viel mehr, als wir denken. Die Frage ist nicht "Wie ist es?", sondern "Wie k√∂nnte es sein?"</div>
            <blockquote>"Phantasie ist wichtiger als Wissen, denn Wissen ist begrenzt." (Albert Einstein)</blockquote>
            <div class="question"><strong>√úbung:</strong> Nimm eine Situation, die dir aussichtslos erscheint. Stelle dir vor, ein Wunder w√§re geschehen √ºber Nacht. Was w√§re anders? Was w√§re das erste kleine Zeichen dieses Wunders?</div>
        `
    },
    {
        day: 25,
        date: "24. Dez",
        title: "Emergenz",
        special: true,
        actualDate: new Date(2024, 11, 24),
        content: `
            <h3>24. Dezember - Heiliger Abend</h3>
            <div class="week-title">EMERGENZ ‚Äì Wenn das Ganze mehr ist als die Summe seiner Teile</div>
            <h3>Das Wunder des Entstehens</h3>
            <div class="impuls"><strong>Impuls:</strong> Emergenz ist, wenn etwas v√∂llig Neues entsteht - etwas, das nicht vorhersehbar war, nicht planbar, nicht aus den Einzelteilen ableitbar. Wie Bewusstsein aus Neuronen entsteht. Wie Liebe aus Begegnungen entsteht. Wie Gemeinschaft aus Individuen entsteht. Das ist das Weihnachtswunder der Systemik: Im Zusammenspiel emergiert etwas, das gr√∂√üer ist als alle Beteiligten.</div>
            <blockquote>"Emergenz ist der Tanz des Lebens - unvorhersehbar, kreativ, sch√∂pferisch." (Fritjof Capra)</blockquote>
            <div class="question"><strong>Die gro√üe Reflexion:</strong>
            <ul>
                <li>Was ist in diesem Jahr in deinem Leben emergiert - unerwartet, neu, gr√∂√üer als die Summe?</li>
                <li>Was ist in diesem Advent in dir emergiert? Was ist neu entstanden, das du am 30. November noch nicht sehen konntest?</li>
                <li>Welche Emergenz l√§dst du f√ºr das kommende Jahr ein?</li>
                <li>Was k√∂nnte entstehen, wenn du alle deine Ressourcen, Erfahrungen, Beziehungen zusammenbringst?</li>
            </ul>
            </div>
            <div class="question"><strong>Die Weihnachtsfrage:</strong><br>
            Wenn alle Systeme, zu denen du geh√∂rst (Familie, Freunde, Arbeit, Gemeinschaft), f√ºr einen Moment in Resonanz schwingen w√ºrden - was w√ºrde emergieren? Welches Neue, Unerwartete, Wunderbare k√∂nnte sich zeigen?</div>
            <div class="impuls"><strong>Systemische Weihnachtsbotschaft:</strong> Du bist Teil vieler Systeme. Deine Anwesenheit ver√§ndert jedes System. Deine Bewusstheit ver√§ndert die Wirklichkeit. Du bist Beobachterin und Sch√∂pferin zugleich.</div>
        `
    }
];

// Fisher-Yates Shuffle f√ºr zuf√§llige Anordnung
function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
}

// KORRIGIERT: Finde das T√ºrchen f√ºr das heutige Datum (ab 02:00 Uhr)
function getTodaysDoor() {
    const now = new Date();
    
    // Erstelle Vergleichsdatum (heute um 02:00 Uhr)
    const today2AM = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 2, 0, 0, 0);
    
    // Wenn es vor 02:00 Uhr ist, z√§hlt noch der Vortag
    let relevantDate;
    if (now < today2AM) {
        relevantDate = new Date(now.getFullYear(), now.getMonth(), now.getDate() - 1);
    } else {
        relevantDate = new Date(now.getFullYear(), now.getMonth(), now.getDate());
    }
    
    // Setze Zeitstempel auf Mitternacht f√ºr Vergleich
    relevantDate.setHours(0, 0, 0, 0);
    
    // Finde das T√ºrchen f√ºr dieses Datum
    for (let door of calendarContent) {
        const doorDate = new Date(door.actualDate);
        doorDate.setHours(0, 0, 0, 0);
        
        if (doorDate.getTime() === relevantDate.getTime()) {
            return door.day;
        }
    }
    
    return null;
}

// LocalStorage f√ºr ge√∂ffnete T√ºrchen
function isDoorOpened(dayNumber) {
    const opened = JSON.parse(localStorage.getItem('openedDoors') || '[]');
    return opened.includes(dayNumber);
}

function markDoorAsOpened(dayNumber) {
    const opened = JSON.parse(localStorage.getItem('openedDoors') || '[]');
    if (!opened.includes(dayNumber)) {
        opened.push(dayNumber);
        localStorage.setItem('openedDoors', JSON.stringify(opened));
    }
}

document.addEventListener('DOMContentLoaded', () => {
    const calendarGrid = document.getElementById('calendarGrid');
    const modal = document.getElementById('modal');
    const modalBody = document.getElementById('modalBody');
    const closeBtn = document.querySelector('.close');

    // Zuf√§llige Anordnung der T√ºrchen
    const shuffledContent = shuffleArray(calendarContent);
    
    shuffledContent.forEach(day => {
        calendarGrid.appendChild(createDoorElement(day));
    });

    closeBtn.addEventListener('click', closeModal);
    window.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });

    function createDoorElement(dayData) {
        const door = document.createElement('div');
        door.className = 'door';
        
        const isOpened = isDoorOpened(dayData.day);
        const todaysDoor = getTodaysDoor();
        
        // KORRIGIERT: T√ºrchen kann nur ge√∂ffnet werden, wenn:
        // 1. Es bereits ge√∂ffnet wurde ODER
        // 2. Es ist das heutige T√ºrchen
        const canOpen = isOpened || (dayData.day === todaysDoor);
        
        if (!canOpen) {
            door.classList.add('locked');
        }
        
        if (isOpened) {
            door.classList.add('opened');
        }
        
        if (dayData.special) {
            door.classList.add('special');
        }

        door.innerHTML = `
            <div class="door-number">${dayData.day}</div>
            <div class="door-date">${dayData.date}</div>
            <div class="door-title">${dayData.title}</div>
        `;

        door.addEventListener('click', () => {
            if (canOpen) {
                openDoor(dayData);
            } else {
                showLockedMessage(dayData);
            }
        });

        return door;
    }

    function openDoor(dayData) {
        markDoorAsOpened(dayData.day);
        modalBody.innerHTML = dayData.content;
        modal.style.display = 'block';
        
        // Aktualisiere die T√ºrchenansicht
        setTimeout(() => {
            location.reload();
        }, 500);
    }

    function showLockedMessage(dayData) {
        modalBody.innerHTML = `
            <h3>üîí T√ºrchen noch verschlossen</h3>
            <p>Dieses T√ºrchen √∂ffnet sich am <strong>${dayData.date}</strong> um <strong>02:00 Uhr morgens</strong>.</p>
            <p>Hab noch ein wenig Geduld... üéÑ</p>
        `;
        modal.style.display = 'block';
    }

    function closeModal() {
        modal.style.display = 'none';
    }
});

// Hilfsfunktion f√ºr Tests: Alle T√ºrchen zur√ºcksetzen
function resetCalendar() {
    localStorage.removeItem('openedDoors');
    location.reload();
}

// Debug-Funktion zum Testen (kann nach Tests entfernt werden)
console.log('Heutiges T√ºrchen:', getTodaysDoor());
console.log('Bereits ge√∂ffnete T√ºrchen:', JSON.parse(localStorage.getItem('openedDoors') || '[]'));
</script>
</body>
</html>
